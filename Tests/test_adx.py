import unittest
from Indicators.adx import ADX

class TestAdx(unittest.TestCase):

    def test_adx(self):
        highs = [30.20,30.28,30.45,29.35,29.35,29.29,28.83,28.73,28.67,28.85,28.64,27.68,27.21,26.87,27.41,26.94,26.52,26.52,27.09,27.69,28.45,28.53,28.67,29.01,29.87,29.80,29.75,30.65,30.60,30.76,31.17,30.89,30.04,30.66,30.60,31.97,32.10,32.03,31.63,31.85,32.71,32.76,32.58,32.13,33.12,33.19,32.52,32.44,33.22,32.83,33.62,33.75,33.60,34.08,34.58,34.22,34.77,34.74,35.01,34.94,34.42,34.40,34.16,33.34,33.39,33.51,33.96,34.42,34.72,33.94,33.66,34.51,34.87,34.75,35.17,36.16,36.45,36.03,36.45,36.74,36.61,36.83,36.84,36.89,36.38,35.99,35.86,35.88,35.73,36.07,35.60,34.98,35.58,36.07,36.21,36.46,36.44,36.54,35.81,35.26,35.21,34.59,34.73,34.86,35.31,35.50,36.63,37.14,37.27,37.70,37.87,38.38,39.17,39.05,39.09,39.27,39.11,39.86,39.53,39.74,39.87,39.82,39.61,39.75,39.53,39.18,39.90,39.84,39.64,38.70,38.80,39.08,39.52,40.04,40.25,40.43,40.28,40.15,40.75,39.88,40.26,39.15,39.25,40.06,40.45,40.96,41.20,41.29,41.38,41.61,42.14,42.32,42.32,42.40,42.53,42.87,42.39,41.79,42.36,42.32,42.30,41.83,40.96,41.11,41.84,41.78,42.32,42.25,42.57,42.45,42.99,42.82,42.69,42.96,43.15,43.51,43.18,43.42,43.45,42.81,42.02,41.89,41.85,41.28,41.03,41.57,42.10,42.35,43.21,43.46,43.83,43.85,43.83,44.34,44.29,44.18,43.77,43.24,44.09,43.84,43.91,43.52,43.31,43.99,44.18,44.19,44.41,43.98,43.69,43.81,44.23,44.28,44.29,44.35,44.38,43.90,44.24,44.89,45.05,45.33,45.74,46.05,46.01,46.02,46.03,46.24,46.25,46.30,46.03,46.30,46.39,45.90,46.24,46.27,46.30,46.39,46.36,46.10,45.24,44.36,44.65,44.61,44.19,43.79,43.05,43.55,43.74,43.43,42.79,42.95,43.28,43.08,43.56,43.65,44.12,44.33,44.69,44.81,44.79,44.50,44.55,44.46,44.62,45.25,45.61,45.58,45.57,46.29,46.39,46.80,47.03,47.10,47.28,47.13,47.36,47.65,47.63,47.75,47.91,48.10,47.97,48.39,48.13,48.20,48.35,48.25,48.49,48.51,48.69,48.66,48.61,48.84,48.99,49.14,49.71,49.98,49.91,49.45,49.67,49.98,50.15,50.36,50.44,50.22,49.42,50.12,50.08,49.96,49.11,48.30,48.12,46.60,47.60,48.19,48.45,48.58,47.32,47.07,47.38,46.43,45.09,45.45,45.13,44.57,45.38,45.70,45.80,46.05,46.08,46.57,46.09,45.27,44.29,44.72,44.93,45.35,46.04,46.57,46.94,46.98,47.23,47.57,47.03,46.36,45.88,45.55,45.44,44.36,43.57,42.86,42.72,43.27,43.91,44.28,44.53,44.93,45.39,45.70,45.63,45.52,44.71,45.15,45.65,45.87,45.99,46.35,46.61,46.47,46.30,45.98,46.68,46.59,46.88,46.81,46.74,47.08,46.84,45.81,45.13,44.96,45.01,45.67,45.71,45.35,44.93,45.23,44.02,44.16,44.22,44.06,44.15,43.75,44.81,45.17,45.91,45.92,46.34,46.59,46.56,47.26,47.59,47.69,47.87,48.14,48.93,49.17,49.02,49.16,49.69,49.75,49.54,49.53,49.84,49.53,49.05,49.76,49.71,49.54,49.87,50.02,50.21,50.75,50.64,51.50,51.72,51.30,51.57,51.71,51.69,52.23,52.15,52.23,52.45,52.49,52.75,52.93,53.04,53.86,53.81,53.83,54.04,53.77,53.48,53.37,52.88,52.25,51.87,52.79,52.59,52.91,52.45,53.25,53.13,52.90,52.74,53.46,53.81,53.94,53.95,54.52,54.15,54.44,54.55,54.74,54.62,54.70,54.66,54.68,54.76,54.89,54.96,54.87,54.86,54.92,54.90,54.80,54.62,55.69,55.55,55.76,55.96,56.05,56.18,56.36,56.56,56.73,57.02,57.23,57.26,56.35,56.49,56.46,56.55,56.98,57.35,57.22,56.16,57.18,57.17,57.14,57.42,57.97,58.07,58.12]
        lows = [29.41,29.32,29.96,28.74,28.56,28.41,28.08,27.43,27.66,27.83,27.40,27.09,26.18,26.13,26.63,26.13,25.43,25.35,25.88,26.96,27.14,28.01,27.88,27.99,28.76,29.14,28.71,28.93,30.03,29.39,30.14,30.43,29.35,29.99,29.52,30.94,31.54,31.36,30.92,31.20,32.13,32.23,31.97,31.56,32.21,32.63,31.76,31.78,32.09,32.19,32.76,33.04,33.05,33.33,33.73,33.70,34.20,34.31,34.14,33.57,33.57,33.37,33.21,32.66,32.77,32.92,33.08,33.64,33.86,33.00,33.01,32.87,34.11,33.89,34.44,35.28,35.78,35.60,36.00,36.08,35.79,36.33,35.96,36.41,35.87,35.25,35.19,35.12,35.24,35.62,34.74,34.49,35.00,35.00,35.76,35.83,35.82,36.10,35.22,34.76,34.23,34.03,34.37,34.28,34.20,35.12,35.85,36.43,36.87,37.31,37.34,37.82,38.08,38.47,38.56,38.62,38.69,39.19,39.09,39.32,39.45,39.14,38.93,39.27,39.02,38.74,38.89,39.32,38.97,38.15,38.30,38.23,38.89,39.42,39.78,39.93,39.76,39.35,39.84,39.47,38.85,38.73,38.71,39.20,40.14,40.26,40.67,40.89,40.88,41.24,41.50,41.87,41.91,41.86,42.14,42.08,41.48,41.29,41.59,41.73,41.31,40.71,40.43,40.54,40.93,41.48,41.84,41.76,41.98,42.07,42.55,42.57,42.18,42.29,42.64,42.76,42.49,42.72,42.49,41.88,41.01,41.25,40.63,40.35,40.55,40.99,41.49,41.78,42.58,43.09,43.30,43.24,43.32,43.81,43.94,43.74,43.04,42.97,43.55,43.42,43.70,42.60,42.81,43.57,43.67,43.57,43.35,43.51,43.05,43.01,43.93,43.64,43.88,43.86,43.98,43.45,43.77,44.43,44.79,44.97,45.36,45.70,45.75,45.72,45.51,46.03,45.92,45.83,45.68,45.69,45.88,45.29,45.37,45.98,45.41,45.71,45.19,45.06,43.81,43.89,43.82,43.78,43.09,42.40,42.65,42.80,43.19,42.39,41.90,42.41,42.53,42.52,42.53,42.93,43.62,44.03,44.21,44.38,44.32,43.72,44.09,43.60,44.16,44.71,45.21,45.19,45.16,45.75,46.19,46.15,46.55,46.73,46.85,46.66,46.98,47.28,47.35,47.12,47.05,47.57,47.71,47.70,47.54,47.90,47.86,47.87,47.59,47.94,48.19,48.17,48.04,48.43,48.73,48.65,49.29,49.66,48.99,48.69,49.22,49.52,49.05,49.88,50.09,49.00,48.77,49.40,48.99,49.22,47.88,47.44,41.37,44.10,47.11,47.00,47.70,47.53,46.18,45.88,46.02,45.36,44.06,43.31,44.45,43.05,43.93,44.90,45.01,44.94,44.94,45.89,44.75,44.03,43.41,43.51,44.05,44.42,45.22,45.26,46.30,46.44,46.75,46.22,46.04,45.58,45.09,44.85,44.71,42.97,42.54,41.67,41.99,42.15,42.60,43.58,43.98,44.36,44.70,45.13,44.89,44.20,44.00,43.76,44.46,45.13,45.27,45.80,46.10,45.77,45.14,44.97,46.10,46.14,46.39,46.41,45.94,46.68,46.17,45.10,44.35,44.61,44.20,44.93,45.01,44.46,44.44,44.36,43.36,43.17,43.40,42.87,43.50,43.08,43.97,44.63,45.44,45.52,45.71,46.21,46.14,46.83,46.97,47.08,47.43,47.75,48.11,48.61,48.42,48.32,49.15,49.35,48.59,49.11,48.75,48.78,48.20,49.00,48.91,49.00,49.08,49.62,49.26,50.28,50.17,50.63,51.30,50.42,50.87,50.79,51.21,51.85,51.42,51.66,51.84,52.17,51.98,52.58,52.36,53.50,53.51,53.45,53.21,53.10,52.66,52.11,52.29,50.85,51.35,52.13,52.14,52.17,51.77,52.56,52.67,52.10,51.88,52.84,53.21,53.50,53.68,53.82,53.69,53.95,54.09,54.27,54.23,54.03,54.06,54.41,54.16,54.62,54.79,54.61,54.21,54.55,54.73,54.55,54.21,54.95,54.92,55.07,55.68,55.32,55.58,55.95,56.20,56.41,56.46,56.49,56.32,55.68,55.65,55.68,56.05,56.45,56.92,55.47,55.39,56.36,56.84,56.40,56.90,57.40,57.56,57.75]
        closes = [29.87,30.24,30.10,28.90,28.92,28.48,28.56,27.56,28.47,28.28,27.49,27.23,26.35,26.33,27.03,26.22,26.01,25.46,27.03,27.45,28.36,28.43,27.95,29.01,29.38,29.36,28.91,30.61,30.05,30.19,31.12,30.54,29.78,30.04,30.49,31.47,32.05,31.97,31.13,31.66,32.64,32.59,32.19,32.10,32.93,33.00,31.94,32.39,32.49,32.80,33.38,33.42,33.17,33.63,33.96,34.05,34.73,34.70,34.71,33.89,33.91,34.03,33.62,32.72,33.08,33.06,33.92,34.08,33.96,33.34,33.23,34.47,34.23,34.63,35.05,36.05,36.10,35.99,36.40,36.44,36.33,36.61,36.48,36.48,36.31,35.57,35.22,35.56,35.49,35.87,34.80,34.72,35.30,36.00,36.08,36.16,36.09,36.11,35.31,35.13,34.25,34.43,34.49,34.64,35.30,35.43,36.62,37.06,37.26,37.62,37.87,38.19,39.03,38.74,39.03,39.15,39.02,39.25,39.13,39.72,39.72,39.41,39.06,39.56,39.28,38.95,39.55,39.77,39.31,38.17,38.72,38.99,39.44,39.97,39.93,40.05,39.98,40.08,40.12,39.71,38.97,38.94,39.19,40.04,40.41,40.76,41.15,41.19,41.35,41.48,42.08,42.07,42.14,42.27,42.35,42.15,41.77,41.41,42.11,41.92,41.95,40.71,40.59,40.92,41.64,41.76,41.94,42.18,42.27,42.28,42.86,42.76,42.48,42.91,42.92,42.84,43.00,42.83,42.69,42.04,41.10,41.79,40.67,40.84,40.97,41.04,42.05,42.30,43.20,43.31,43.59,43.34,43.70,44.15,44.29,44.04,43.35,43.13,43.83,43.68,43.87,43.20,43.25,43.70,43.76,43.58,43.81,43.60,43.33,43.77,43.99,43.82,44.24,43.99,44.05,43.51,44.22,44.72,44.99,45.32,45.74,45.98,45.79,45.93,45.51,46.17,46.17,45.90,45.93,46.30,46.11,45.54,46.10,46.14,45.61,46.34,45.68,45.25,43.93,44.08,44.12,44.46,43.32,42.56,43.03,43.42,43.66,42.39,42.75,42.44,42.88,42.79,43.44,43.53,44.09,44.33,44.61,44.59,44.50,43.93,44.37,44.36,44.52,45.17,45.31,45.36,45.51,46.19,46.28,46.54,46.92,47.10,47.11,46.99,47.29,47.42,47.58,47.29,47.72,48.05,47.82,47.75,47.80,48.03,48.19,47.96,47.96,48.40,48.54,48.42,48.53,48.82,48.86,49.11,49.70,49.92,49.32,49.29,49.54,49.82,50.10,50.31,50.20,49.13,49.16,50.02,49.03,49.72,48.23,47.98,46.37,45.22,47.57,47.52,48.41,47.65,46.73,46.88,46.23,45.87,44.16,44.65,44.47,44.51,44.01,45.68,45.41,44.99,46.05,46.49,44.90,44.08,44.00,43.64,44.88,45.31,45.30,46.51,46.70,46.85,46.89,46.49,46.13,45.94,45.24,45.16,45.01,43.27,42.61,42.49,42.37,42.50,43.86,44.10,44.52,44.65,45.22,45.45,45.49,44.24,44.62,45.15,44.54,45.66,45.95,46.33,46.31,45.94,45.60,45.70,46.56,46.36,46.83,46.72,46.65,46.97,46.56,45.29,44.94,44.62,44.70,45.27,45.44,44.76,44.82,44.38,43.55,43.97,43.44,43.97,43.51,43.36,44.66,45.15,45.90,45.59,46.14,46.32,46.49,47.14,47.34,47.64,47.83,48.00,48.83,48.82,48.69,48.67,49.66,49.39,49.37,49.29,49.07,49.01,48.48,49.66,49.23,49.41,49.75,49.77,50.11,50.52,50.42,51.49,51.30,50.82,51.19,51.29,51.64,51.89,52.03,52.19,52.30,52.18,52.22,52.78,53.02,53.67,53.67,53.74,53.45,53.72,53.39,52.51,52.32,51.45,51.60,52.43,52.47,52.91,52.07,53.12,52.77,52.73,52.09,53.19,53.73,53.87,53.85,53.88,54.08,54.14,54.50,54.30,54.40,54.16,54.58,54.52,54.56,54.89,54.89,54.74,54.77,54.67,54.79,54.66,54.46,55.31,55.27,55.74,55.92,55.87,56.08,56.16,56.56,56.58,57.00,57.16,56.51,56.11,55.68,56.45,56.53,56.83,57.18,55.73,56.00,57.05,56.96,57.06,57.38,57.65,58.03,57.93]

        # check the corectness of calculation given predetermined inputs
        result = [None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, 37.02, 35.39, 33.88, 31.98, 29.97, 28.13, 27.29, 26.63, 25.77, 24.4, 23.37, 23.27, 23.22, 22.79, 21.8, 21.88, 22.03, 20.97, 19.99, 19.89, 19.8, 20.45, 21.16, 21.81, 22.85, 24.21, 25.41, 26.95, 28.38, 29.91, 30.17, 30.4, 30.22, 29.73, 28.25, 26.96, 25.93, 25.62, 25.89, 26.48, 25.4, 24.4, 24.5, 24.96, 24.97, 25.43, 26.7, 28.09, 29.03, 30.23, 31.55, 32.19, 32.97, 32.95, 32.98, 31.98, 30.04, 28.15, 26.29, 24.56, 23.5, 22.53, 21.96, 20.47, 19.61, 19.0, 18.76, 18.52, 18.43, 17.39, 17.06, 17.39, 17.92, 18.15, 18.12, 17.28, 16.18, 16.43, 17.19, 18.02, 19.21, 20.47, 22.09, 24.16, 26.08, 27.89, 29.7, 31.39, 33.47, 35.15, 36.86, 38.54, 39.26, 39.4, 39.68, 39.29, 38.26, 38.18, 38.1, 37.21, 34.8, 32.73, 31.23, 30.45, 30.35, 30.49, 30.81, 30.73, 29.79, 29.68, 28.85, 27.04, 25.18, 23.6, 23.25, 23.38, 24.02, 24.85, 25.7, 26.58, 27.63, 29.08, 30.57, 31.96, 33.32, 34.7, 36.28, 36.15, 35.58, 35.73, 35.86, 34.99, 33.01, 30.69, 28.78, 28.07, 27.41, 27.48, 27.38, 27.67, 27.94, 28.81, 29.61, 29.41, 29.57, 29.94, 30.71, 30.75, 31.08, 30.82, 29.27, 27.93, 26.69, 26.36, 26.39, 26.42, 25.38, 23.6, 22.32, 22.24, 22.44, 23.01, 23.43, 23.82, 24.73, 25.58, 25.91, 24.8, 23.65, 23.71, 23.52, 23.43, 22.02, 20.7, 19.94, 19.48, 18.88, 18.32, 17.81, 16.6, 15.56, 15.3, 14.5, 13.77, 13.21, 12.75, 12.44, 11.64, 11.99, 12.56, 13.48, 14.86, 16.5, 18.03, 19.36, 20.02, 20.94, 21.49, 21.74, 21.55, 21.86, 22.3, 21.14, 20.71, 20.37, 19.07, 17.74, 17.44, 17.39, 18.96, 20.41, 21.09, 21.76, 23.17, 25.08, 26.85, 27.34, 27.39, 28.26, 29.49, 30.29, 30.35, 30.42, 29.52, 28.51, 26.74, 24.91, 23.78, 22.91, 21.99, 20.78, 19.57, 19.23, 18.6, 17.63, 17.28, 16.91, 16.51, 17.17, 17.91, 19.1, 20.45, 21.79, 23.23, 24.06, 25.12, 26.44, 27.66, 28.12, 28.77, 29.63, 30.42, 31.7, 32.36, 33.07, 33.93, 34.74, 34.47, 34.26, 34.39, 34.43, 33.97, 34.0, 34.32, 34.89, 36.24, 37.8, 37.01, 35.48, 34.45, 33.99, 32.41, 31.3, 30.41, 29.04, 28.12, 26.22, 24.87, 23.62, 24.1, 24.95, 28.23, 31.28, 32.96, 33.89, 34.48, 35.11, 36.23, 37.39, 38.09, 39.02, 40.33, 41.79, 43.13, 44.78, 45.35, 45.53, 45.57, 45.31, 45.03, 44.16, 43.98, 44.16, 44.61, 44.47, 44.08, 43.2, 41.57, 39.49, 37.18, 34.99, 32.69, 31.07, 29.74, 28.94, 28.62, 28.52, 28.54, 29.75, 31.1, 32.77, 34.32, 34.91, 34.57, 33.78, 32.72, 31.24, 29.32, 27.26, 25.55, 24.68, 24.06, 22.92, 21.31, 20.08, 19.07, 18.56, 18.37, 17.71, 16.64, 15.87, 15.23, 14.63, 14.44, 14.26, 13.35, 12.98, 12.23, 12.8, 14.01, 15.14, 16.54, 16.79, 16.96, 17.67, 18.34, 18.46, 19.53, 20.68, 21.64, 22.99, 24.07, 25.42, 24.85, 23.81, 22.32, 20.95, 20.18, 19.76, 19.25, 19.56, 20.18, 20.85, 21.65, 22.66, 24.27, 25.95, 27.11, 28.3, 29.84, 31.31, 31.08, 30.87, 29.99, 29.18, 27.38, 26.66, 25.84, 25.08, 24.82, 24.77, 24.0, 24.0, 23.78, 24.56, 25.5, 24.75, 24.37, 24.17, 23.99, 24.45, 24.06, 23.8, 23.83, 23.91, 24.32, 24.92, 24.96, 25.95, 26.87, 27.58, 27.64, 27.43, 26.24, 24.63, 23.14, 23.7, 24.23, 23.09, 22.03, 20.54, 19.73, 18.83, 17.99, 17.03, 16.45, 15.68, 15.4, 15.3, 15.22, 15.85, 16.19, 16.85, 17.6, 18.52, 19.28, 19.53, 19.76, 20.01, 19.6, 19.46, 19.46, 18.97, 17.68, 16.49, 15.38, 14.66, 14.76, 14.85, 14.87, 15.24, 15.91, 15.64, 15.63, 15.94, 16.56, 17.42, 18.65, 20.09, 20.91, 20.04, 19.48, 18.96, 18.66, 19.17, 20.19, 19.3, 18.6, 18.15, 17.73, 16.62, 16.0, 16.14, 16.39, 16.7]
        
        a = ADX(highs=highs, lows=lows, closes=closes)

        self.assertListEqual(result, a.adx())

        self.assertEqual(len(result), len(a.adx()))

        self.assertEqual(result[-1], a.adx()[-1])

        self.assertIsInstance(a.adx(), list)
